import{u as x}from"./active-section-context.CzQ81bTb.js";import{r as v}from"./index.B80Lgev0.js";var I=new Map,h=new WeakMap,V=0,C=void 0;function O(e){return e?(h.has(e)||(V+=1,h.set(e,V.toString())),h.get(e)):"0"}function m(e){return Object.keys(e).sort().filter(t=>e[t]!==void 0).map(t=>`${t}_${t==="root"?O(e.root):e[t]}`).toString()}function M(e){let t=m(e),n=I.get(t);if(!n){const i=new Map;let u;const s=new IntersectionObserver(o=>{o.forEach(r=>{var c;const g=r.isIntersecting&&u.some(a=>r.intersectionRatio>=a);e.trackVisibility&&typeof r.isVisible>"u"&&(r.isVisible=g),(c=i.get(r.target))==null||c.forEach(a=>{a(g,r)})})},e);u=s.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:s,elements:i},I.set(t,n)}return n}function T(e,t,n={},i=C){if(typeof window.IntersectionObserver>"u"&&i!==void 0){const c=e.getBoundingClientRect();return t(i,{isIntersecting:i,target:e,intersectionRatio:typeof n.threshold=="number"?n.threshold:0,time:0,boundingClientRect:c,intersectionRect:c,rootBounds:c}),()=>{}}const{id:u,observer:s,elements:o}=M(n);let r=o.get(e)||[];return o.has(e)||o.set(e,r),r.push(t),s.observe(e),function(){r.splice(r.indexOf(t),1),r.length===0&&(o.delete(e),s.unobserve(e)),o.size===0&&(s.disconnect(),I.delete(u))}}function _({threshold:e,delay:t,trackVisibility:n,rootMargin:i,root:u,triggerOnce:s,skip:o,initialInView:r,fallbackInView:c,onChange:g}={}){var a;const[b,y]=v.useState(null),l=v.useRef(),[w,p]=v.useState({inView:!!r,entry:void 0});l.current=g,v.useEffect(()=>{if(o||!b)return;let d;return d=T(b,(E,S)=>{p({inView:E,entry:S}),l.current&&l.current(E,S),S.isIntersecting&&s&&d&&(d(),d=void 0)},{root:u,rootMargin:i,threshold:e,trackVisibility:n,delay:t},c),()=>{d&&d()}},[Array.isArray(e)?e.toString():e,b,u,i,s,o,n,c,t]);const R=(a=w.entry)==null?void 0:a.target,A=v.useRef();!b&&R&&!s&&!o&&A.current!==R&&(A.current=R,p({inView:!!r,entry:void 0}));const f=[y,w.inView,w.entry];return f.ref=f[0],f.inView=f[1],f.entry=f[2],f}function j(e,t=.75){const{ref:n,inView:i}=_({threshold:t}),{setActiveSection:u,timeOfLastClick:s}=x();return v.useEffect(()=>{i&&Date.now()-s>1e3&&u(e)},[i,u,s,e]),{ref:n}}export{j as u};
